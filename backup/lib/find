#!/bin/bash

# This script inherits the COMPANIES_DIR variable from the main 'cocli' dispatcher.

# Use find to get all files, pipe to fzf for selection
# The preview window in fzf is incredibly useful here
SELECTED_FILE=$(find "$COMPANIES_DIR" -type f | fzf --preview 'bat --color=always {}')

# Exit if nothing was selected
if [[ -z "$SELECTED_FILE" ]]; then
    echo "No file selected."
    exit 1
fi

# Open the selected file
${EDITOR:-vim} "$SELECTED_FILE"